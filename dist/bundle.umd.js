!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bigintConversion={})}(this,(function(e){"use strict";function t(e,t=!1,n){const r=e.match(/^(0x)?([\da-fA-F]+)$/);if(null==r)throw new RangeError("input must be a hexadecimal string, e.g. '0x124fe3a' or '0214f1b2'");let o=r[2];if(void 0!==n){if(n<o.length/2)throw new RangeError(`expected byte length ${n} < input hex byte length ${Math.ceil(o.length/2)}`);o=o.padStart(2*n,"0")}return t?"0x"+o:o}function n(e,t=!1){if(e<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return c(o(e),t)}function r(e){let t=8n;ArrayBuffer.isView(e)?t=BigInt(8*e.BYTES_PER_ELEMENT):e=new Uint8Array(e);let n=0n;for(const r of e.values()){n=(n<<t)+BigInt(r)}return n}function o(e,n=!1,r){if(e<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return t(e.toString(16),n,r)}function i(e){return BigInt(t(e,!0))}function a(e){return(new TextDecoder).decode(new Uint8Array(e))}function f(e,t=!1){return(new TextEncoder).encode(e).buffer}function u(e,n=!1,r){{let o="";const i="0123456789abcdef";return(e=ArrayBuffer.isView(e)?new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)):new Uint8Array(e)).forEach((e=>{o+=i[e>>4]+i[15&e]})),t(o,n,r)}}function c(e,n=!1){let r=t(e);return r=t(e,!1,Math.ceil(r.length/2)),Uint8Array.from(r.match(/[\da-fA-F]{2}/g).map((e=>parseInt(e,16)))).buffer}e.base64ToBigint=function(e){return r(function(e,t=!1){{let n=!1;if(/^[0-9a-zA-Z_-]+={0,2}$/.test(e))n=!0;else if(!/^[0-9a-zA-Z+/]*={0,2}$/.test(e))throw new Error("Not a valid base64 input");n&&(e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/=/g,""));const r=new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0))));return t?(new TextDecoder).decode(r):r}}(e))},e.bigintToBase64=function(e,t=!1,r=!0){return function(e,t=!1,n=!0){let r="";return r=(e=>{const t=[];for(let n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return btoa(t.join(""))})("string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)),t&&(r=function(e){return e.replace(/\+/g,"-").replace(/\//g,"_")}(r)),n||(r=r.replace(/=/g,"")),r}(n(e),t,r)},e.bigintToBuf=n,e.bigintToHex=o,e.bigintToText=function(e){if(e<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return a(c(e.toString(16)))},e.bufToBigint=r,e.bufToHex=u,e.bufToText=a,e.hexToBigint=i,e.hexToBuf=c,e.parseHex=t,e.textToBigint=function(e){return i(u(f(e)))},e.textToBuf=f}));
